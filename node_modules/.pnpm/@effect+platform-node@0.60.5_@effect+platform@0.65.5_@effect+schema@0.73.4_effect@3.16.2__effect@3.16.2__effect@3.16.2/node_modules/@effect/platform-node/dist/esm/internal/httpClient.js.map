{"version":3,"file":"httpClient.js","names":["Cookies","Client","Error","ClientResponse","IncomingMessage","Context","Effect","pipe","Layer","Stream","Http","Https","Readable","pipeline","NodeSink","HttpIncomingMessageImpl","HttpAgentTypeId","Symbol","for","HttpAgent","GenericTag","makeAgent","options","map","all","acquireRelease","sync","Agent","agent","destroy","http","https","makeAgentLayer","scoped","agentLayer","fromAgent","makeService","request","url","signal","nodeRequest","protocol","method","headers","zipRight","sendBody","body","waitForResponse","concurrent","_","ClientResponseImpl","suspend","_tag","end","waitForFinish","response","Response","formData","forEach","value","key","setHeader","tryPromise","try","fromWeb","catch","cause","RequestError","reason","run","mapError","stream","fromWritable","async","resume","onError","fail","on","onResponse","off","succeed","once","onFinish","void","TypeId","constructor","source","ResponseError","status","statusCode","cachedCookies","cookies","undefined","header","Array","isArray","fromSetCookie","empty","init","globalThis","Headers","statusMessage","statusText","toWeb","toJSON","inspect","_id","make","layerWithoutAgent","layerMergedContext","layer","provide"],"sources":["../../../src/internal/httpClient.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAO,KAAKA,OAAO,MAAM,0BAA0B;AAEnD,OAAO,KAAKC,MAAM,MAAM,6BAA6B;AACrD,OAAO,KAAKC,KAAK,MAAM,kCAAkC;AAEzD,OAAO,KAAKC,cAAc,MAAM,qCAAqC;AACrE,OAAO,KAAKC,eAAe,MAAM,sCAAsC;AACvE,OAAO,KAAKC,OAAO,MAAM,gBAAgB;AACzC,OAAO,KAAKC,MAAM,MAAM,eAAe;AACvC,SAASC,IAAI,QAAQ,iBAAiB;AACtC,OAAO,KAAKC,KAAK,MAAM,cAAc;AAErC,OAAO,KAAKC,MAAM,MAAM,eAAe;AACvC,OAAO,KAAKC,IAAI,MAAM,WAAW;AACjC,OAAO,KAAKC,KAAK,MAAM,YAAY;AACnC,SAASC,QAAQ,QAAQ,aAAa;AACtC,SAASC,QAAQ,QAAQ,sBAAsB;AAE/C,OAAO,KAAKC,QAAQ,MAAM,gBAAgB;AAC1C,SAASC,uBAAuB,QAAQ,0BAA0B;AAElE;AACA,OAAO,MAAMC,eAAe,gBAA+BC,MAAM,CAACC,GAAG,CACnE,iDAAiD,CACpB;AAE/B;AACA,OAAO,MAAMC,SAAS,gBAAGd,OAAO,CAACe,UAAU,CAAuB,iDAAiD,CAAC;AAEpH;AACA,OAAO,MAAMC,SAAS,GAAIC,OAA4B,IACpDhB,MAAM,CAACiB,GAAG,CACRjB,MAAM,CAACkB,GAAG,CAAC,CACTlB,MAAM,CAACmB,cAAc,CACnBnB,MAAM,CAACoB,IAAI,CAAC,MAAM,IAAIhB,IAAI,CAACiB,KAAK,CAACL,OAAO,CAAC,CAAC,EACzCM,KAAK,IAAKtB,MAAM,CAACoB,IAAI,CAAC,MAAME,KAAK,CAACC,OAAO,EAAE,CAAC,CAC9C,EACDvB,MAAM,CAACmB,cAAc,CACnBnB,MAAM,CAACoB,IAAI,CAAC,MAAM,IAAIf,KAAK,CAACgB,KAAK,CAACL,OAAO,CAAC,CAAC,EAC1CM,KAAK,IAAKtB,MAAM,CAACoB,IAAI,CAAC,MAAME,KAAK,CAACC,OAAO,EAAE,CAAC,CAC9C,CACF,CAAC,EACF,CAAC,CAACC,IAAI,EAAEC,KAAK,CAAC,MAAM;EAClB,CAACf,eAAe,GAAGA,eAAe;EAClCc,IAAI;EACJC;CACD,CAAC,CACH;AAEH;AACA,OAAO,MAAMC,cAAc,GAAIV,OAA4B,IACzDd,KAAK,CAACyB,MAAM,CAACd,SAAS,EAAEE,SAAS,CAACC,OAAO,CAAC,CAAC;AAE7C;AACA,OAAO,MAAMY,UAAU,gBAAGF,cAAc,EAAE;AAE1C,MAAMG,SAAS,GAAIP,KAA2B,IAC5C3B,MAAM,CAACmC,WAAW,CAAC,CAACC,OAAO,EAAEC,GAAG,EAAEC,MAAM,KAAI;EAC1C,MAAMC,WAAW,GAAGF,GAAG,CAACG,QAAQ,KAAK,QAAQ,GAC3C9B,KAAK,CAAC0B,OAAO,CAACC,GAAG,EAAE;IACjBV,KAAK,EAAEA,KAAK,CAACG,KAAK;IAClBW,MAAM,EAAEL,OAAO,CAACK,MAAM;IACtBC,OAAO,EAAEN,OAAO,CAACM,OAAO;IACxBJ;GACD,CAAC,GACF7B,IAAI,CAAC2B,OAAO,CAACC,GAAG,EAAE;IAChBV,KAAK,EAAEA,KAAK,CAACE,IAAI;IACjBY,MAAM,EAAEL,OAAO,CAACK,MAAM;IACtBC,OAAO,EAAEN,OAAO,CAACM,OAAO;IACxBJ;GACD,CAAC;EACJ,OAAOhC,IAAI,CACTD,MAAM,CAACsC,QAAQ,CAACC,QAAQ,CAACL,WAAW,EAAEH,OAAO,EAAEA,OAAO,CAACS,IAAI,CAAC,EAAEC,eAAe,CAACP,WAAW,EAAEH,OAAO,CAAC,EAAE;IACnGW,UAAU,EAAE;GACb,CAAC,EACF1C,MAAM,CAACiB,GAAG,CAAE0B,CAAC,IAAK,IAAIC,kBAAkB,CAACb,OAAO,EAAEY,CAAC,CAAC,CAAC,CACtD;AACH,CAAC,CAAC;AAEJ,MAAMJ,QAAQ,GAAGA,CACfL,WAA+B,EAC/BH,OAAwC,EACxCS,IAAmB,KAEnBxC,MAAM,CAAC6C,OAAO,CAAC,MAA8C;EAC3D,QAAQL,IAAI,CAACM,IAAI;IACf,KAAK,OAAO;MAAE;QACZZ,WAAW,CAACa,GAAG,EAAE;QACjB,OAAOC,aAAa,CAACd,WAAW,EAAEH,OAAO,CAAC;MAC5C;IACA,KAAK,YAAY;IACjB,KAAK,KAAK;MAAE;QACVG,WAAW,CAACa,GAAG,CAACP,IAAI,CAACA,IAAI,CAAC;QAC1B,OAAOQ,aAAa,CAACd,WAAW,EAAEH,OAAO,CAAC;MAC5C;IACA,KAAK,UAAU;MAAE;QACf,MAAMkB,QAAQ,GAAG,IAAIC,QAAQ,CAACV,IAAI,CAACW,QAAQ,CAAC;QAE5CF,QAAQ,CAACZ,OAAO,CAACe,OAAO,CAAC,CAACC,KAAK,EAAEC,GAAG,KAAI;UACtCpB,WAAW,CAACqB,SAAS,CAACD,GAAG,EAAED,KAAK,CAAC;QACnC,CAAC,CAAC;QAEF,OAAOrD,MAAM,CAACwD,UAAU,CAAC;UACvBC,GAAG,EAAEA,CAAA,KAAMlD,QAAQ,CAACD,QAAQ,CAACoD,OAAO,CAACT,QAAQ,CAACT,IAAY,CAAC,EAAEN,WAAW,CAAC;UACzEyB,KAAK,EAAGC,KAAK,IACX,IAAIhE,KAAK,CAACiE,YAAY,CAAC;YACrB9B,OAAO;YACP+B,MAAM,EAAE,WAAW;YACnBF;WACD;SACJ,CAAC;MACJ;IACA,KAAK,QAAQ;MAAE;QACb,OAAOzD,MAAM,CAAC4D,GAAG,CACf5D,MAAM,CAAC6D,QAAQ,CAACxB,IAAI,CAACyB,MAAM,EAAGL,KAAK,IACjC,IAAIhE,KAAK,CAACiE,YAAY,CAAC;UACrB9B,OAAO;UACP+B,MAAM,EAAE,QAAQ;UAChBF;SACD,CAAC,CAAC,EACLpD,QAAQ,CAAC0D,YAAY,CAAC,MAAMhC,WAAW,EAAG0B,KAAK,IAC7C,IAAIhE,KAAK,CAACiE,YAAY,CAAC;UACrB9B,OAAO;UACP+B,MAAM,EAAE,WAAW;UACnBF;SACD,CAAC,CAAC,CACN;MACH;EACF;AACF,CAAC,CAAC;AAEJ,MAAMnB,eAAe,GAAGA,CAACP,WAA+B,EAAEH,OAAwC,KAChG/B,MAAM,CAACmE,KAAK,CAA4CC,MAAM,IAAI;EAChE,SAASC,OAAOA,CAACT,KAAY;IAC3BQ,MAAM,CAACpE,MAAM,CAACsE,IAAI,CAChB,IAAI1E,KAAK,CAACiE,YAAY,CAAC;MACrB9B,OAAO;MACP+B,MAAM,EAAE,WAAW;MACnBF;KACD,CAAC,CACH,CAAC;EACJ;EACA1B,WAAW,CAACqC,EAAE,CAAC,OAAO,EAAEF,OAAO,CAAC;EAEhC,SAASG,UAAUA,CAACvB,QAA8B;IAChDf,WAAW,CAACuC,GAAG,CAAC,OAAO,EAAEJ,OAAO,CAAC;IACjCD,MAAM,CAACpE,MAAM,CAAC0E,OAAO,CAACzB,QAAQ,CAAC,CAAC;EAClC;EACAf,WAAW,CAACqC,EAAE,CAAC,SAAS,EAAEC,UAAU,CAAC;EACrCtC,WAAW,CAACqC,EAAE,CAAC,UAAU,EAAEC,UAAU,CAAC;EAEtC,OAAOxE,MAAM,CAACoB,IAAI,CAAC,MAAK;IACtBc,WAAW,CAACuC,GAAG,CAAC,OAAO,EAAEJ,OAAO,CAAC;IACjCnC,WAAW,CAACuC,GAAG,CAAC,SAAS,EAAED,UAAU,CAAC;IACtCtC,WAAW,CAACuC,GAAG,CAAC,UAAU,EAAED,UAAU,CAAC;EACzC,CAAC,CAAC;AACJ,CAAC,CAAC;AAEJ,MAAMxB,aAAa,GAAGA,CAACd,WAA+B,EAAEH,OAAwC,KAC9F/B,MAAM,CAACmE,KAAK,CAA4BC,MAAM,IAAI;EAChD,SAASC,OAAOA,CAACT,KAAY;IAC3BQ,MAAM,CAACpE,MAAM,CAACsE,IAAI,CAChB,IAAI1E,KAAK,CAACiE,YAAY,CAAC;MACrB9B,OAAO;MACP+B,MAAM,EAAE,WAAW;MACnBF;KACD,CAAC,CACH,CAAC;EACJ;EACA1B,WAAW,CAACyC,IAAI,CAAC,OAAO,EAAEN,OAAO,CAAC;EAElC,SAASO,QAAQA,CAAA;IACf1C,WAAW,CAACuC,GAAG,CAAC,OAAO,EAAEJ,OAAO,CAAC;IACjCD,MAAM,CAACpE,MAAM,CAAC6E,IAAI,CAAC;EACrB;EACA3C,WAAW,CAACyC,IAAI,CAAC,QAAQ,EAAEC,QAAQ,CAAC;EAEpC,OAAO5E,MAAM,CAACoB,IAAI,CAAC,MAAK;IACtBc,WAAW,CAACuC,GAAG,CAAC,OAAO,EAAEJ,OAAO,CAAC;IACjCnC,WAAW,CAACuC,GAAG,CAAC,QAAQ,EAAEG,QAAQ,CAAC;EACrC,CAAC,CAAC;AACJ,CAAC,CAAC;AAEJ,MAAMhC,kBAAmB,SAAQnC,uBAA4C;EAMhEsB,OAAA;EAHF,CAAClC,cAAc,CAACiF,MAAM;EAE/BC,YACWhD,OAAwC,EACjDiD,MAA4B;IAE5B,KAAK,CAACA,MAAM,EAAGpB,KAAK,IAClB,IAAIhE,KAAK,CAACqF,aAAa,CAAC;MACtBlD,OAAO;MACPkB,QAAQ,EAAE,IAAI;MACda,MAAM,EAAE,QAAQ;MAChBF;KACD,CAAC,CAAC;IATI,KAAA7B,OAAO,GAAPA,OAAO;IAUhB,IAAI,CAAClC,cAAc,CAACiF,MAAM,CAAC,GAAGjF,cAAc,CAACiF,MAAM;EACrD;EAEA,IAAII,MAAMA,CAAA;IACR,OAAO,IAAI,CAACF,MAAM,CAACG,UAAW;EAChC;EAEAC,aAAa;EACb,IAAIC,OAAOA,CAAA;IACT,IAAI,IAAI,CAACD,aAAa,KAAKE,SAAS,EAAE;MACpC,OAAO,IAAI,CAACF,aAAa;IAC3B;IACA,MAAMG,MAAM,GAAG,IAAI,CAACP,MAAM,CAAC3C,OAAO,CAAC,YAAY,CAAC;IAChD,IAAImD,KAAK,CAACC,OAAO,CAACF,MAAM,CAAC,EAAE;MACzB,OAAO,IAAI,CAACH,aAAa,GAAG1F,OAAO,CAACgG,aAAa,CAACH,MAAM,CAAC;IAC3D;IACA,OAAO,IAAI,CAACH,aAAa,GAAG1F,OAAO,CAACiG,KAAK;EAC3C;EAEA,IAAIxC,QAAQA,CAAA;IACV,OAAOnD,MAAM,CAACwD,UAAU,CAAC;MACvBC,GAAG,EAAEA,CAAA,KAAK;QACR,MAAMmC,IAAI,GAIN;UACFvD,OAAO,EAAE,IAAIwD,UAAU,CAACC,OAAO,CAAC,IAAI,CAACd,MAAM,CAAC3C,OAAc;SAC3D;QAED,IAAI,IAAI,CAAC2C,MAAM,CAACG,UAAU,EAAE;UAC1BS,IAAI,CAACV,MAAM,GAAG,IAAI,CAACF,MAAM,CAACG,UAAU;QACtC;QAEA,IAAI,IAAI,CAACH,MAAM,CAACe,aAAa,EAAE;UAC7BH,IAAI,CAACI,UAAU,GAAG,IAAI,CAAChB,MAAM,CAACe,aAAa;QAC7C;QAEA,OAAO,IAAI7C,QAAQ,CAAC5C,QAAQ,CAAC2F,KAAK,CAAC,IAAI,CAACjB,MAAM,CAAQ,EAAEY,IAAI,CAAC,CAACzC,QAAQ,EAAE;MAC1E,CAAC;MACDQ,KAAK,EAAE,IAAI,CAACU;KACb,CAAC;EACJ;EAEA6B,MAAMA,CAAA;IACJ,OAAOpG,eAAe,CAACqG,OAAO,CAAC,IAAI,EAAE;MACnCC,GAAG,EAAE,qCAAqC;MAC1CrE,OAAO,EAAE,IAAI,CAACA,OAAO,CAACmE,MAAM,EAAE;MAC9BhB,MAAM,EAAE,IAAI,CAACA;KACd,CAAC;EACJ;;AAGF;AACA,OAAO,MAAMmB,IAAI,gBAAGrG,MAAM,CAACiB,GAAG,CAACJ,SAAS,EAAEgB,SAAS,CAAC;AAEpD;AACA,OAAO,MAAMyE,iBAAiB,gBAAG3G,MAAM,CAAC4G,kBAAkB,CAACF,IAAI,CAAC;AAEhE;AACA,OAAO,MAAMG,KAAK,gBAAGtG,KAAK,CAACuG,OAAO,CAACH,iBAAiB,EAAE1E,UAAU,CAAC","ignoreList":[]}