{"version":3,"file":"HttpApiBuilder.js","names":["AST","ParseResult","Schema","Chunk","Context","Effect","Encoding","FiberRef","identity","globalValue","Layer","Option","pipeArguments","Redacted","unify","HttpApi","HttpApiEndpoint","HttpApiDecodeError","HttpApiSchema","HttpApp","HttpMethod","HttpMiddleware","HttpRouter","HttpServer","HttpServerRequest","HttpServerResponse","OpenApi","Router","Tag","serve","middleware","httpApp","pipe","map","unwrapEffect","provide","Live","gen","api","router","apiMiddleware","serviceOption","Middleware","errorSchema","makeErrorSchema","encodeError","encodeUnknown","_tag","value","catchAll","error","matchEffect","onFailure","die","onSuccess","succeed","toWebHandler","runtime","handlerPromise","bindTo","bind","runtimeEffect","toWebHandlerRuntime","runPromise","request","then","handler","self","HandlersTypeId","Symbol","for","HandlersProto","_Endpoints","arguments","makeHandlers","options","Object","create","group","handlers","groupName","build","use","context","findFirst","groups","identifier","Error","result","empty","isEffect","routes","item","route","push","handlerToRoute","endpoint","mapInputContext","input","merge","withFullResponse","concat","fromIterable","handle","name","o","endpoints","append","middlewareAdd","current","getOption","withContext","middlewareAddNoContext","middlewareLayer","args","apiFirst","isHttpApi","add","effect","flatMap","middlewareLayerScoped","scoped","middlewareCors","cors","middlewareOpenApi","spec","fromApi","response","json","orDie","get","path","bearerLen","length","securityDecode","make","headers","authorization","slice","schema","Struct","key","String","decode","in","schemaSearchParams","schemaCookies","schemaHeaders","match","username","password","decodeBase64String","header","parts","split","securitySetCookie","stringValue","appendPreResponseHandler","_req","setCookie","secure","httpOnly","middlewareSecurity","tag","f","provideServiceEffect","middlewareSecurityVoid","zipRight","requestPayload","urlParams","isMultipart","hasBody","method","multipart","isFullResponse","decodePath","pathSchema","decodeUnknown","payloadSchema","getMultipart","ast","getOrElse","decodePayload","decodeHeaders","headersSchema","encoding","getEncoding","successSchema","successStatus","getStatusSuccess","encodeSuccess","schemaSuccess","encode","kind","body","status","contentType","text","data","uint8Array","params","makeRoute","withFiberRuntime","fiber","getFiberRef","currentContext","unsafeGet","routeContext","RouteContext","ParsedSearchParams","refailParseError","_","raw","pathParams","payload","as","astCache","WeakMap","schemas","Set","processSchema","has","astType","types","annotations","set","Union","getStatusError","encoded","encodedAST","isEmpty","transformOrFail","Any","__","fail","Forbidden","mapError","Type"],"sources":["../../src/HttpApiBuilder.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}