{"version":3,"file":"OpenApi.js","names":["AST","JSONSchema","Schema","Context","dual","Option","HttpApi","HttpApiSchema","HttpMethod","Identifier","Tag","Title","Version","Description","License","Security","ExternalDocs","annotations","context","empty","identifier","undefined","add","title","description","version","license","security","externalDocs","annotate","self","annotations_","base","Object","setPrototypeOf","getPrototypeOf","merge","assign","fromApi","api","spec","openapi","info","getOrElse","paths","tags","components","schemas","securitySchemes","securityMap","Map","securityCount","registerSecurity","has","get","count","id","_tag","scheme","makeSecurityScheme","set","map","getOption","apiSecurity","push","reflect","onGroup","group","tag","name","onEndpoint","endpoint","errors","mergedAnnotations","successAST","successEncoding","successStatus","path","replace","method","toLowerCase","op","operationId","parameters","responses","getDescriptionOrIdentifier","payloadSchema","pipe","filter","hasBody","schema","requestBody","content","getMultipart","ast","makeJsonSchema","required","contentType","make","isSome","pathSchema","value","entries","properties","forEach","jsonSchema","in","includes","headersSchema","status","getEmptyDecodeable","meta","type","key","to","flatMapNullable","DescriptionAnnotationId","IdentifierAnnotationId","$schema"],"sources":["../../src/OpenApi.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}