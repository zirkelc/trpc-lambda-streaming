{"version":3,"file":"workerRunner.js","names":["Schema","Serializable","Cause","Chunk","Context","Effect","Either","Fiber","pipe","Layer","Schedule","Stream","Transferable","isWorkerError","WorkerError","PlatformRunnerTypeId","Symbol","for","PlatformRunner","GenericTag","run","process","options","gen","platform","backing","start","fiberMap","Map","portId","id","kind","data","span","fiber","get","void","interrupt","withFiberRuntime","set","decode","succeed","flatMap","input","collector","unsafeMakeCollector","stream","effect","isEffect","out","encodeOutput","provideService","Collector","payload","send","unsafeRead","runForEachChunk","chunk","undefined","toReadonlyArray","unsafeClear","forEach","andThen","withParentSpan","_tag","traceId","spanId","sampled","context","empty","uninterruptibleMask","restore","catchIf","error","encodeCause","fail","catchAllCause","cause","match","failureOrCause","onLeft","encodeError","onRight","ensuring","sync","delete","make","tapErrorCause","logDebug","retry","spaced","annotateLogs","package","module","interruptAsFork","interruptible","forkScoped","asVoid","layer","scopedDiscard","makeSerialized","schema","handlers","_","scope","parseRequest","decodeUnknown","request","result","isLayer","buildWithScope","merge","provide","provideContext","message","mapError","reason","serializeFailure","serializeSuccess","layerSerialized"],"sources":["../../../src/internal/workerRunner.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}