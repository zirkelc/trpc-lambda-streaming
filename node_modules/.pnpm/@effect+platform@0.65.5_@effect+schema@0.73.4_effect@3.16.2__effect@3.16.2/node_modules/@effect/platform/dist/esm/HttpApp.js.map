{"version":3,"file":"HttpApp.js","names":["Context","Effect","Exit","FiberRef","dual","globalValue","Layer","Option","Runtime","Scope","ServerError","ServerRequest","ServerResponse","internalMiddleware","toHandled","self","handleResponse","middleware","responded","withFiberRuntime","fiber","handled","request","unsafeGet","getFiberRef","currentContext","HttpServerRequest","preprocessResponse","response","handler","currentPreResponseHandlers","_tag","value","succeed","matchCauseEffect","onFailure","cause","flatMap","causeResponse","pipe","zipRight","failCause","onSuccess","tap","withTracer","tracer","undefined","void","_cause","empty","status","uninterruptible","scoped","Symbol","for","unsafeMake","none","appendPreResponseHandler","update","match","onNone","some","onSome","prev","withPreResponseHandler","locallyWith","toWebHandlerRuntime","runtime","run","runFork","Promise","resolve","provideService","toWeb","withoutBody","method","fromWeb","signal","addEventListener","unsafeInterruptAsFork","clientAbortFiberId","once","toWebHandler","defaultRuntime","toWebHandlerLayer","layer","scope","runSync","make","close","runPromise","build","map","toRuntime","_","runner","extend","then"],"sources":["../../src/HttpApp.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}