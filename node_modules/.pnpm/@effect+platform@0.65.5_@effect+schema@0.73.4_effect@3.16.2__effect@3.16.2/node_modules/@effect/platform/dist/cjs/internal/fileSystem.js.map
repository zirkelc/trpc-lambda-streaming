{"version":3,"file":"fileSystem.js","names":["Channel","_interopRequireWildcard","require","Chunk","_Context","Effect","_Function","Layer","Option","Sink","Stream","Error","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","tag","exports","GenericTag","Size","bytes","BigInt","KiB","MiB","GiB","TiB","bigint1024","bigintPiB","PiB","make","impl","of","exists","path","pipe","access","as","catchTag","reason","succeed","fail","readFileString","encoding","tryMap","readFile","try","_","TextDecoder","decode","catch","BadArgument","module","method","message","stream","options","open","flag","offset","tap","file","seek","identity","map","unwrapScoped","sink","forEach","writeAll","writeFileString","data","flatMap","TextEncoder","encode","writeFile","notFound","SystemError","pathOrDescriptor","makeNoop","fileSystem","chmod","chown","copy","copyFile","link","makeDirectory","die","makeTempDirectory","makeTempDirectoryScoped","makeTempFile","makeTempFileScoped","readDirectory","readLink","realPath","remove","void","rename","oldPath","stat","symlink","fromPath","truncate","utimes","watch","layerNoop","bufferSize","bytesToRead","bytesToRead_","chunkSize","chunkSize_","undefined","loop","totalBytesRead","toRead","readAlloc","match","onNone","onSome","buf","write","length","bufferChunks","fromChannel","capacity"],"sources":["../../../src/internal/fileSystem.ts"],"sourcesContent":[null],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,uBAAA,CAAAC,OAAA;AACA,IAAAE,QAAA,GAAAF,OAAA;AACA,IAAAG,MAAA,GAAAJ,uBAAA,CAAAC,OAAA;AACA,IAAAI,SAAA,GAAAJ,OAAA;AACA,IAAAK,KAAA,GAAAN,uBAAA,CAAAC,OAAA;AACA,IAAAM,MAAA,GAAAP,uBAAA,CAAAC,OAAA;AACA,IAAAO,IAAA,GAAAR,uBAAA,CAAAC,OAAA;AACA,IAAAQ,MAAA,GAAAT,uBAAA,CAAAC,OAAA;AACA,IAAAS,KAAA,GAAAV,uBAAA,CAAAC,OAAA;AAAoC,SAAAU,yBAAAC,CAAA,6BAAAC,OAAA,mBAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,CAAA,WAAAA,CAAA,GAAAG,CAAA,GAAAD,CAAA,KAAAF,CAAA;AAAA,SAAAZ,wBAAAY,CAAA,EAAAE,CAAA,SAAAA,CAAA,IAAAF,CAAA,IAAAA,CAAA,CAAAI,UAAA,SAAAJ,CAAA,eAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,WAAAK,OAAA,EAAAL,CAAA,QAAAG,CAAA,GAAAJ,wBAAA,CAAAG,CAAA,OAAAC,CAAA,IAAAA,CAAA,CAAAG,GAAA,CAAAN,CAAA,UAAAG,CAAA,CAAAI,GAAA,CAAAP,CAAA,OAAAQ,CAAA,KAAAC,SAAA,UAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,CAAA,IAAAd,CAAA,oBAAAc,CAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,CAAA,SAAAG,CAAA,GAAAP,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAb,CAAA,EAAAc,CAAA,UAAAG,CAAA,KAAAA,CAAA,CAAAV,GAAA,IAAAU,CAAA,CAAAC,GAAA,IAAAP,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAG,CAAA,IAAAT,CAAA,CAAAM,CAAA,IAAAd,CAAA,CAAAc,CAAA,YAAAN,CAAA,CAAAH,OAAA,GAAAL,CAAA,EAAAG,CAAA,IAAAA,CAAA,CAAAe,GAAA,CAAAlB,CAAA,EAAAQ,CAAA,GAAAA,CAAA;AAGpC;AACO,MAAMW,GAAG,GAAAC,OAAA,CAAAD,GAAA,gBAAG,IAAAE,mBAAU,EAAa,6BAA6B,CAAC;AAExE;AACO,MAAMC,IAAI,GAAIC,KAAgB,IAAK,OAAOA,KAAK,KAAK,QAAQ,GAAGA,KAAc,GAAGC,MAAM,CAACD,KAAK,CAAU;AAE7G;AAAAH,OAAA,CAAAE,IAAA,GAAAA,IAAA;AACO,MAAMG,GAAG,GAAIjB,CAAS,IAAKc,IAAI,CAACd,CAAC,GAAG,IAAI,CAAC;AAEhD;AAAAY,OAAA,CAAAK,GAAA,GAAAA,GAAA;AACO,MAAMC,GAAG,GAAIlB,CAAS,IAAKc,IAAI,CAACd,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC;AAEvD;AAAAY,OAAA,CAAAM,GAAA,GAAAA,GAAA;AACO,MAAMC,GAAG,GAAInB,CAAS,IAAKc,IAAI,CAACd,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC;AAE9D;AAAAY,OAAA,CAAAO,GAAA,GAAAA,GAAA;AACO,MAAMC,GAAG,GAAIpB,CAAS,IAAKc,IAAI,CAACd,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC;AAAAY,OAAA,CAAAQ,GAAA,GAAAA,GAAA;AAErE,MAAMC,UAAU,gBAAGL,MAAM,CAAC,IAAI,CAAC;AAC/B,MAAMM,SAAS,GAAGD,UAAU,GAAGA,UAAU,GAAGA,UAAU,GAAGA,UAAU,GAAGA,UAAU;AAEhF;AACO,MAAME,GAAG,GAAIvB,CAAS,IAAKc,IAAI,CAACE,MAAM,CAAChB,CAAC,CAAC,GAAGsB,SAAS,CAAC;AAE7D;AAAAV,OAAA,CAAAW,GAAA,GAAAA,GAAA;AACO,MAAMC,IAAI,GACfC,IAA2F,IAC7E;EACd,OAAOd,GAAG,CAACe,EAAE,CAAC;IACZ,GAAGD,IAAI;IACPE,MAAM,EAAGC,IAAI,IACX,IAAAC,cAAI,EACFJ,IAAI,CAACK,MAAM,CAACF,IAAI,CAAC,EACjB5C,MAAM,CAAC+C,EAAE,CAAC,IAAI,CAAC,EACf/C,MAAM,CAACgD,QAAQ,CAAC,aAAa,EAAGxC,CAAC,IAAKA,CAAC,CAACyC,MAAM,KAAK,UAAU,GAAGjD,MAAM,CAACkD,OAAO,CAAC,KAAK,CAAC,GAAGlD,MAAM,CAACmD,IAAI,CAAC3C,CAAC,CAAC,CAAC,CACxG;IACH4C,cAAc,EAAEA,CAACR,IAAI,EAAES,QAAQ,KAC7BrD,MAAM,CAACsD,MAAM,CAACb,IAAI,CAACc,QAAQ,CAACX,IAAI,CAAC,EAAE;MACjCY,GAAG,EAAGC,CAAC,IAAK,IAAIC,WAAW,CAACL,QAAQ,CAAC,CAACM,MAAM,CAACF,CAAC,CAAC;MAC/CG,KAAK,EAAEA,CAAA,KACLtD,KAAK,CAACuD,WAAW,CAAC;QAChBC,MAAM,EAAE,YAAY;QACpBC,MAAM,EAAE,gBAAgB;QACxBC,OAAO,EAAE;OACV;KACJ,CAAC;IACJC,MAAM,EAAEA,CAACrB,IAAI,EAAEsB,OAAO,KACpB,IAAArB,cAAI,EACFJ,IAAI,CAAC0B,IAAI,CAACvB,IAAI,EAAE;MAAEwB,IAAI,EAAE;IAAG,CAAE,CAAC,EAC9BF,OAAO,EAAEG,MAAM,GACbrE,MAAM,CAACsE,GAAG,CAAEC,IAAI,IAAKA,IAAI,CAACC,IAAI,CAACN,OAAO,CAACG,MAAO,EAAE,OAAO,CAAC,CAAC,GACzDI,kBAAQ,EACVzE,MAAM,CAAC0E,GAAG,CAAEH,IAAI,IAAKN,MAAM,CAACM,IAAI,EAAEL,OAAO,CAAC,CAAC,EAC3C7D,MAAM,CAACsE,YAAY,CACpB;IACHC,IAAI,EAAEA,CAAChC,IAAI,EAAEsB,OAAO,KAClB,IAAArB,cAAI,EACFJ,IAAI,CAAC0B,IAAI,CAACvB,IAAI,EAAE;MAAEwB,IAAI,EAAE,GAAG;MAAE,GAAGF;IAAO,CAAE,CAAC,EAC1ClE,MAAM,CAAC0E,GAAG,CAAEH,IAAI,IAAKnE,IAAI,CAACyE,OAAO,CAAEpB,CAAa,IAAKc,IAAI,CAACO,QAAQ,CAACrB,CAAC,CAAC,CAAC,CAAC,EACvErD,IAAI,CAACuE,YAAY,CAClB;IACHI,eAAe,EAAEA,CAACnC,IAAI,EAAEoC,IAAI,EAAEd,OAAO,KACnClE,MAAM,CAACiF,OAAO,CACZjF,MAAM,CAACwD,GAAG,CAAC;MACTA,GAAG,EAAEA,CAAA,KAAM,IAAI0B,WAAW,EAAE,CAACC,MAAM,CAACH,IAAI,CAAC;MACzCpB,KAAK,EAAEA,CAAA,KACLtD,KAAK,CAACuD,WAAW,CAAC;QAChBC,MAAM,EAAE,YAAY;QACpBC,MAAM,EAAE,iBAAiB;QACzBC,OAAO,EAAE;OACV;KACJ,CAAC,EACDP,CAAC,IAAKhB,IAAI,CAAC2C,SAAS,CAACxC,IAAI,EAAEa,CAAC,EAAES,OAAO,CAAC;GAE5C,CAAC;AACJ,CAAC;AAAAtC,OAAA,CAAAY,IAAA,GAAAA,IAAA;AAED,MAAM6C,QAAQ,GAAGA,CAACtB,MAAc,EAAEnB,IAAY,KAC5CtC,KAAK,CAACgF,WAAW,CAAC;EAChBxB,MAAM,EAAE,YAAY;EACpBC,MAAM;EACNd,MAAM,EAAE,UAAU;EAClBe,OAAO,EAAE,2BAA2B;EACpCuB,gBAAgB,EAAE3C;CACnB,CAAC;AAEJ;AACO,MAAM4C,QAAQ,GACnBC,UAA+B,IACjB;EACd,OAAO;IACL3C,MAAMA,CAACF,IAAI;MACT,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,QAAQ,EAAEzC,IAAI,CAAC,CAAC;IAC9C,CAAC;IACD8C,KAAKA,CAAC9C,IAAI;MACR,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,OAAO,EAAEzC,IAAI,CAAC,CAAC;IAC7C,CAAC;IACD+C,KAAKA,CAAC/C,IAAI;MACR,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,OAAO,EAAEzC,IAAI,CAAC,CAAC;IAC7C,CAAC;IACDgD,IAAIA,CAAChD,IAAI;MACP,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,MAAM,EAAEzC,IAAI,CAAC,CAAC;IAC5C,CAAC;IACDiD,QAAQA,CAACjD,IAAI;MACX,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,UAAU,EAAEzC,IAAI,CAAC,CAAC;IAChD,CAAC;IACDD,MAAMA,CAAA;MACJ,OAAO3C,MAAM,CAACkD,OAAO,CAAC,KAAK,CAAC;IAC9B,CAAC;IACD4C,IAAIA,CAAClD,IAAI;MACP,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,MAAM,EAAEzC,IAAI,CAAC,CAAC;IAC5C,CAAC;IACDmD,aAAaA,CAAA;MACX,OAAO/F,MAAM,CAACgG,GAAG,CAAC,iBAAiB,CAAC;IACtC,CAAC;IACDC,iBAAiBA,CAAA;MACf,OAAOjG,MAAM,CAACgG,GAAG,CAAC,iBAAiB,CAAC;IACtC,CAAC;IACDE,uBAAuBA,CAAA;MACrB,OAAOlG,MAAM,CAACgG,GAAG,CAAC,iBAAiB,CAAC;IACtC,CAAC;IACDG,YAAYA,CAAA;MACV,OAAOnG,MAAM,CAACgG,GAAG,CAAC,iBAAiB,CAAC;IACtC,CAAC;IACDI,kBAAkBA,CAAA;MAChB,OAAOpG,MAAM,CAACgG,GAAG,CAAC,iBAAiB,CAAC;IACtC,CAAC;IACD7B,IAAIA,CAACvB,IAAI;MACP,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,MAAM,EAAEzC,IAAI,CAAC,CAAC;IAC5C,CAAC;IACDyD,aAAaA,CAACzD,IAAI;MAChB,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,eAAe,EAAEzC,IAAI,CAAC,CAAC;IACrD,CAAC;IACDW,QAAQA,CAACX,IAAI;MACX,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,UAAU,EAAEzC,IAAI,CAAC,CAAC;IAChD,CAAC;IACDQ,cAAcA,CAACR,IAAI;MACjB,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,gBAAgB,EAAEzC,IAAI,CAAC,CAAC;IACtD,CAAC;IACD0D,QAAQA,CAAC1D,IAAI;MACX,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,UAAU,EAAEzC,IAAI,CAAC,CAAC;IAChD,CAAC;IACD2D,QAAQA,CAAC3D,IAAI;MACX,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,UAAU,EAAEzC,IAAI,CAAC,CAAC;IAChD,CAAC;IACD4D,MAAMA,CAAA;MACJ,OAAOxG,MAAM,CAACyG,IAAI;IACpB,CAAC;IACDC,MAAMA,CAACC,OAAO;MACZ,OAAO3G,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,QAAQ,EAAEsB,OAAO,CAAC,CAAC;IACjD,CAAC;IACD/B,IAAIA,CAAChC,IAAI;MACP,OAAOxC,IAAI,CAAC+C,IAAI,CAACkC,QAAQ,CAAC,MAAM,EAAEzC,IAAI,CAAC,CAAC;IAC1C,CAAC;IACDgE,IAAIA,CAAChE,IAAI;MACP,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,MAAM,EAAEzC,IAAI,CAAC,CAAC;IAC5C,CAAC;IACDqB,MAAMA,CAACrB,IAAI;MACT,OAAOvC,MAAM,CAAC8C,IAAI,CAACkC,QAAQ,CAAC,QAAQ,EAAEzC,IAAI,CAAC,CAAC;IAC9C,CAAC;IACDiE,OAAOA,CAACC,QAAQ;MACd,OAAO9G,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,SAAS,EAAEyB,QAAQ,CAAC,CAAC;IACnD,CAAC;IACDC,QAAQA,CAACnE,IAAI;MACX,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,UAAU,EAAEzC,IAAI,CAAC,CAAC;IAChD,CAAC;IACDoE,MAAMA,CAACpE,IAAI;MACT,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,QAAQ,EAAEzC,IAAI,CAAC,CAAC;IAC9C,CAAC;IACDqE,KAAKA,CAACrE,IAAI;MACR,OAAOvC,MAAM,CAAC8C,IAAI,CAACkC,QAAQ,CAAC,OAAO,EAAEzC,IAAI,CAAC,CAAC;IAC7C,CAAC;IACDwC,SAASA,CAACxC,IAAI;MACZ,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,WAAW,EAAEzC,IAAI,CAAC,CAAC;IACjD,CAAC;IACDmC,eAAeA,CAACnC,IAAI;MAClB,OAAO5C,MAAM,CAACmD,IAAI,CAACkC,QAAQ,CAAC,iBAAiB,EAAEzC,IAAI,CAAC,CAAC;IACvD,CAAC;IACD,GAAG6C;GACJ;AACH,CAAC;AAED;AAAA7D,OAAA,CAAA4D,QAAA,GAAAA,QAAA;AACO,MAAM0B,SAAS,GACpBzB,UAA+B,IACHvF,KAAK,CAACgD,OAAO,CAACvB,GAAG,EAAE6D,QAAQ,CAACC,UAAU,CAAC,CAAC;AAEtE;AAAA7D,OAAA,CAAAsF,SAAA,GAAAA,SAAA;AACA,MAAMjD,MAAM,GAAGA,CAACM,IAAU,EAAE;EAC1B4C,UAAU,GAAG,EAAE;EACfC,WAAW,EAAEC,YAAY;EACzBC,SAAS,EAAEC,UAAU,GAAGzF,IAAI,CAAC,EAAE,GAAG,IAAI;AAAC,IACtB,EAAE,KAAI;EACvB,MAAMsF,WAAW,GAAGC,YAAY,KAAKG,SAAS,GAAG1F,IAAI,CAACuF,YAAY,CAAC,GAAGG,SAAS;EAC/E,MAAMF,SAAS,GAAGxF,IAAI,CAACyF,UAAU,CAAC;EAElC,SAASE,IAAIA,CACXC,cAAsB;IAEtB,IAAIN,WAAW,KAAKI,SAAS,IAAIJ,WAAW,IAAIM,cAAc,EAAE;MAC9D,OAAO/H,OAAO,CAAC8G,IAAI;IACrB;IAEA,MAAMkB,MAAM,GAAGP,WAAW,KAAKI,SAAS,IAAKJ,WAAW,GAAGM,cAAc,GAAIJ,SAAS,GAClFF,WAAW,GAAGM,cAAc,GAC5BJ,SAAS;IAEb,OAAO3H,OAAO,CAACsF,OAAO,CACpBV,IAAI,CAACqD,SAAS,CAACD,MAAM,CAAC,EACtBxH,MAAM,CAAC0H,KAAK,CAAC;MACXC,MAAM,EAAEA,CAAA,KAAMnI,OAAO,CAAC8G,IAAI;MAC1BsB,MAAM,EAAGC,GAAG,IACVrI,OAAO,CAACsF,OAAO,CACbtF,OAAO,CAACsI,KAAK,CAACnI,KAAK,CAAC4C,EAAE,CAACsF,GAAG,CAAC,CAAC,EAC3BvE,CAAC,IAAKgE,IAAI,CAACC,cAAc,GAAG1F,MAAM,CAACgG,GAAG,CAACE,MAAM,CAAC,CAAC;KAErD,CAAC,CACH;EACH;EAEA,OAAO7H,MAAM,CAAC8H,YAAY,CACxB9H,MAAM,CAAC+H,WAAW,CAACX,IAAI,CAACzF,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EACnC;IAAEqG,QAAQ,EAAElB;EAAU,CAAE,CACzB;AACH,CAAC","ignoreList":[]}