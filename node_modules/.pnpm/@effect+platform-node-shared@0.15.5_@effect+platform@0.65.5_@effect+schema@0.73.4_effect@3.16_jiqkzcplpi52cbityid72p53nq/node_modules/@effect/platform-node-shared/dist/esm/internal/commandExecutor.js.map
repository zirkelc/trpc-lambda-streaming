{"version":3,"file":"commandExecutor.js","names":["Command","CommandExecutor","FileSystem","Deferred","Effect","constUndefined","identity","pipe","Inspectable","Layer","Option","Sink","Stream","ChildProcess","handleErrnoException","fromWritable","fromReadable","inputToStdioOption","stdin","outputToStdioOption","output","toError","err","globalThis","Error","String","toPlatformError","method","error","command","flattened","flatten","reduce","acc","curr","args","join","length","ProcessProto","ProcessTypeId","BaseProto","toJSON","_id","pid","runCommand","fileSystem","_tag","spawn","flatMap","make","exitCode","async","resume","handle","stdio","stdout","stderr","cwd","getOrElse","shell","env","process","Object","fromEntries","on","fail","unsafeDone","succeed","sync","kill","match","onNone","void","onSome","dir","access","zipRight","acquireRelease","isDone","done","suspend","await","map","exitCodeDeferred","drain","code","signal","ExitCode","isRunning","negate","asVoid","ProcessId","transduce","assign","create","tap","forkDaemon","run","head","tail","slice","initial","last","stream","unwrapScoped","layer","effect","makeExecutor"],"sources":["../../../src/internal/commandExecutor.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}