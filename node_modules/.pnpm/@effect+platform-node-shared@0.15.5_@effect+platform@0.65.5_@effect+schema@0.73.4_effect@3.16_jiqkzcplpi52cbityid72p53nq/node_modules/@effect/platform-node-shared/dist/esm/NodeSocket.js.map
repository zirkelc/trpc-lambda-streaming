{"version":3,"file":"NodeSocket.js","names":["Socket","Channel","Context","Effect","FiberRef","FiberSet","Layer","Option","Queue","Scope","Net","NetSocket","GenericTag","EOF","Symbol","for","makeNet","options","fromDuplex","acquireRelease","async","resume","conn","createConnection","on","removeAllListeners","succeed","cause","fail","SocketGenericError","reason","sync","destroy","closed","destroySoon","open","get","currentSendQueueCapacity","pipe","flatMap","sendQueueCapacity","dropping","bindTo","bind","context","map","openContext","sendQueue","run","handler","scope","provide","add","_","make","fiberSet","runtime","provideService","tap","take","chunk","isCloseEvent","code","Error","undefined","end","void","write","forever","withUnhandledErrorLogLevel","none","result","isEffect","onEnd","onError","onClose","hadError","SocketCloseError","off","raceFirst","join","scoped","interruptible","offer","writer","of","TypeId","runRaw","makeNetChannel","unwrapScoped","toChannelWith","layerNet","effect"],"sources":["../../src/NodeSocket.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}